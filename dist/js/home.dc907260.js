(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{"02f4":function(t,e,n){var i=n("4588"),s=n("be13");t.exports=function(t){return function(e,n){var r,a,c=String(s(e)),o=i(n),l=c.length;return o<0||o>=l?t?"":void 0:(r=c.charCodeAt(o),r<55296||r>56319||o+1===l||(a=c.charCodeAt(o+1))<56320||a>57343?t?c.charAt(o):r:t?c.slice(o,o+2):a-56320+(r-55296<<10)+65536)}}},"14f4":function(t,e,n){},"16c0":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"home",staticClass:"home"},[n("nav",[n("h2",{staticClass:"title"},[t._v("沐雪music")]),n("search-bar")],1),n("div",{staticClass:"scroll-wrapper"},[n("Scroll",{ref:"scrolls",staticClass:"scroll",attrs:{data:t.recommendSongs}},[n("div",{staticClass:"recommend"},[this.banners&&this.banners.length?n("div",{staticClass:"slides"},[n("slide",{attrs:{autoPlay:!0,interval:3e3,loop:!0}},t._l(t.banners,function(t){return n("div",{key:t.imageUrl,staticClass:"slide-item"},[n("img",{staticClass:"slide-img",attrs:{src:t.imageUrl,alt:""}})])}),0)],1):t._e(),n("div",{staticClass:"recommendSongs"},[n("recommend-list",{attrs:{list:t.recommendSongs},on:{setDiscList:t.handleDisc}})],1),n("div",{staticClass:"newSongs"},[n("recommend-list",{attrs:{list:t.newDiscs,title:"最新歌单"},on:{setDiscList:t.handleDisc}})],1)])])],1),n("router-view",{ref:"musicList",attrs:{title:t.title,picUrl:t.picUrl,songs:t.songs,id:t.discId},on:{select:t.selectItem,play:t.playAll}})],1)},s=[],r=n("a745"),a=n.n(r);function c(t){if(a()(t))return t}var o=n("5d73"),l=n.n(o);function u(t,e){var n=[],i=!0,s=!1,r=void 0;try{for(var a,c=l()(t);!(i=(a=c.next()).done);i=!0)if(n.push(a.value),e&&n.length===e)break}catch(o){s=!0,r=o}finally{try{i||null==c["return"]||c["return"]()}finally{if(s)throw r}}return n}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function f(t,e){return c(t)||u(t,e)||d()}var h=n("795b"),m=n.n(h),p=(n("ac6a"),n("5df3"),n("7f7f"),n("cebc")),v=(n("cadf"),n("551c"),n("097d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"slide",staticClass:"slide"},[n("div",{ref:"slideGroup",staticClass:"slide-group"},[t._t("default")],2),n("div",{staticClass:"dots"},t._l(t.dots,function(e,i){return n("span",{key:i,staticClass:"dot",class:{active:t.currentIndex===i}})}),0)])}),g=[],b=(n("c5f6"),n("1fba")),y={name:"",components:{},props:{loop:{type:Boolean,default:!0},autoPlay:{type:Boolean,default:!0},interval:{type:Number,default:4e3}},data:function(){return{dots:[],currentIndex:0}},watch:{},computed:{},methods:{initDots:function(){this.dots=new Array(this.children.length)},setSlideWidth:function(t){this.children=this.$refs.slideGroup.children;for(var e=0,n=this.$refs.slide.clientWidth,i=0;i<this.children.length;i++){var s=this.children[i];s.style.width=n+"px",e+=n}this.loop&&!t&&(e+=2*n),this.$refs.slideGroup.style.width=e+"px"},initSlide:function(){this.slideScroll=new b["a"](this.$refs.slide,{scrollX:!0,scrollY:!1,momentum:!1,snap:{loop:this.loop,threshold:.3,speed:400},bounce:!0}),this.onScrollEnd(),this.onTouchEnd(),this.onBeforeScrollStart()},onScrollEnd:function(){var t=this;this.slideScroll.on("scrollEnd",function(){var e=t.slideScroll.getCurrentPage().pageX;t.currentIndex=e,t.autoPlay&&t.play()})},onTouchEnd:function(){var t=this;this.slideScroll.on("touchEnd",function(){t.autoPlay&&t.play()})},onBeforeScrollStart:function(){var t=this;this.slideScroll.on("beforeScrollStart",function(){t.autoPlay&&clearTimeout(t.timer)})},play:function(){var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.slideScroll.next()},this.interval)}},created:function(){},mounted:function(){var t=this;setTimeout(function(){t.setSlideWidth(),t.initDots(),t.initSlide(),t.autoPlay&&t.play()},20),window.addEventListener("resize",function(){t.slideScroll&&(t.setSlideWidth(!0),t.slideScroll.refresh())})}},S=y,w=(n("85f1"),n("2877")),C=Object(w["a"])(S,v,g,!1,null,"638bec07",null);C.options.__file="Slide.vue";var _=C.exports,k=n("42ba"),x=n("3ce5"),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"recommend"},[n("h2",{staticClass:"title",on:{click:t.handleClick}},[n("span",[t._v(t._s(t.title))]),n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-right"}})])]),n("ul",{staticClass:"list-wrapper"},t._l(t.list,function(e){return n("li",{key:e.id,staticClass:"list",on:{click:function(n){t.selectItem(e)}}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.picUrl?e.picUrl:e.coverImgUrl,expression:"item.picUrl ? item.picUrl : item.coverImgUrl"}],staticClass:"pic",attrs:{alt:""}}),n("p",{staticClass:"name"},[t._v(t._s(e.name))]),n("div",{staticClass:"number"},[n("svg",{staticClass:"icon i-count",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-music"}})]),n("div",{staticClass:"count"},[t._v(t._s(t._f("setCount")(e.playCount)))])])])}),0)])},j=[],D={name:"",components:{},filters:{setCount:function(t){return t<1e4?"<1万":"".concat(Math.ceil(t/1e4),"万")}},props:{list:{type:Array,default:function(){return[]}},title:{type:String,default:"推荐歌单"}},data:function(){return{}},watch:{},computed:{},methods:{handleClick:function(){this.$router.push({path:"/songslist"})},selectItem:function(t){this.$emit("setDiscList",t)}},created:function(){},mounted:function(){}},L=D,A=(n("e911"),Object(w["a"])(L,O,j,!1,null,"71d2b1da",null));A.options.__file="RecommendList.vue";var I=A.exports,E=n("2f62"),R=n("76f3"),$=n("0712"),U={name:"home",components:{Slide:_,Scroll:x["a"],RecommendList:I,SearchBar:R["a"]},mixins:[$["d"]],props:{},data:function(){return{banners:[],recommendSongs:[],newDiscs:[],songs:[],list:[]}},watch:{},computed:Object(p["a"])({},Object(E["c"])(["isLogin"]),{title:function(){return this.list.name},picUrl:function(){return this.list.coverImgUrl},discId:function(){return this.list.id},allData:function(){return this.banners.concat(this.newDiscs,this.recommendSongs)}}),methods:Object(p["a"])({},Object(E["d"])({setLoading:"SET_LOADING"}),{handleDisc:function(t){var e=this;this.$router.push({path:"/home/".concat(t.id)}),this.setLoading(!0),k["a"].getDisc(t.id).then(function(t){e.setLoading(!1),e.setList(t)})},getAllRecommend:function(){var t,e=k["a"].getBanner();t=this.isLogin?k["a"].getResource():k["a"].getRecommendSongs();var n=k["a"].getNewDisc();return m.a.all([e,t,n])},setAllRecommend:function(t){var e=f(t,3),n=e[0],i=e[1],s=e[2];this.setBanner(n),this.setRecommendSongs(i),this.setNewDisc(s)},setBanner:function(t){this.banners=t.banners},setRecommendSongs:function(t){this.isLogin?this.recommendSongs=t.recommend:this.recommendSongs=t.result},setNewDisc:function(t){this.newDiscs=t.playlists}}),activated:function(){this.$refs.scrolls.refresh()},created:function(){var t=this;this.setLoading(!0),this.getAllRecommend().then(function(e){t.setLoading(!1),t.setAllRecommend(e)})}},B=U,N=(n("3926"),Object(w["a"])(B,i,s,!1,null,"27ed8b60",null));N.options.__file="index.vue";e["default"]=N.exports},"1af6":function(t,e,n){var i=n("63b6");i(i.S,"Array",{isArray:n("9003")})},3926:function(t,e,n){"use strict";var i=n("14f4"),s=n.n(i);s.a},4127:function(t,e,n){},"42ba":function(t,e,n){"use strict";var i=n("d225"),s=n("b0b4"),r=n("e1d2"),a=function(){function t(){Object(i["a"])(this,t)}return Object(s["a"])(t,null,[{key:"getBanner",value:function(){return Object(r["a"])("banner")}},{key:"getRecommend",value:function(){return Object(r["a"])("recommend")}},{key:"getRecommendSongs",value:function(){return Object(r["a"])("personalized",{params:{limit:6}})}},{key:"getNewSong",value:function(){return Object(r["a"])("newSong",{})}},{key:"getDisc",value:function(t){return Object(r["a"])("disc",{params:{id:t}})}},{key:"getNewDisc",value:function(){return Object(r["a"])("newDisc",{params:{order:"new",limit:6}})}},{key:"getResource",value:function(){return Object(r["a"])("resource",{params:{limit:6}})}},{key:"getAllSongList",value:function(t,e,n){return Object(r["a"])("newDisc",{params:{limit:10,cat:t,offset:e,order:n}})}},{key:"getCatList",value:function(){return Object(r["a"])("catList")}},{key:"getComment",value:function(t,e){return Object(r["a"])("comment",{params:{id:t,offset:e}})}}]),t}();e["a"]=a},"469f":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("7d7b")},"5d73":function(t,e,n){t.exports=n("469f")},"5df3":function(t,e,n){"use strict";var i=n("02f4")(!0);n("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},"65fe":function(t,e,n){},"76f3":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-bar"},[n("input",{staticClass:"input",attrs:{type:"text",placeholder:t.placeholder,readonly:""},on:{click:t.clickInput}}),n("svg",{staticClass:"icon souso",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-sousuo"}})])])},s=[],r=n("cebc"),a=(n("cadf"),n("551c"),n("097d"),n("2f62")),c={name:"",components:{},props:{placeholder:{type:String,default:"搜歌手，搜歌曲"}},data:function(){return{}},watch:{},computed:Object(r["a"])({},Object(a["c"])(["showFooter","query"])),methods:{clickInput:function(){this.$router.push({path:"/search"})}}},o=c,l=(n("a007"),n("2877")),u=Object(l["a"])(o,i,s,!1,null,"3798c977",null);u.options.__file="SearchNav.vue";e["a"]=u.exports},"7d7b":function(t,e,n){var i=n("e4ae"),s=n("7cd6");t.exports=n("584a").getIterator=function(t){var e=s(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},"85f1":function(t,e,n){"use strict";var i=n("4127"),s=n.n(i);s.a},a007:function(t,e,n){"use strict";var i=n("65fe"),s=n.n(i);s.a},a745:function(t,e,n){t.exports=n("f410")},e911:function(t,e,n){"use strict";var i=n("f19a"),s=n.n(i);s.a},f19a:function(t,e,n){},f410:function(t,e,n){n("1af6"),t.exports=n("584a").Array.isArray}}]);
//# sourceMappingURL=home.dc907260.js.map